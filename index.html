<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Algorithm Visualizer</title>
    <!-- Load p5.js from local libraries folder -->
    <script src="libraries/p5.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>Sorting Algorithm Visualizer</h1>
        <p>Watch algorithms sort data in real-time</p>
    </div>

    <div class="controls">
        <div class="control-group">
            <label for="size-slider">Array Size</label>
            <div class="slider-container">
                <input type="range" id="size-slider" min="10" max="200" value="50">
                <div class="value-display" id="size-value">50</div>
            </div>
        </div>
        
        <div class="control-group">
            <label for="speed-slider">Animation Speed</label>
            <div class="slider-container">
                <input type="range" id="speed-slider" min="1" max="10" value="5">
                <div class="value-display" id="speed-value">5</div>
            </div>
        </div>
        
        <div class="control-group">
            <label for="algorithm-select">Sorting Algorithm</label>
            <select id="algorithm-select">
                <option value="bubble">Bubble Sort</option>
                <option value="selection">Selection Sort</option>
                <option value="insertion">Insertion Sort</option>
                <option value="merge">Merge Sort</option>
                <option value="quick">Quick Sort</option>
            </select>
        </div>
        
        <div class="button-group">
            <button id="start-btn">Start Sorting</button>
            <button id="reset-btn">Reset Array</button>
        </div>
    </div>

    <div class="info-panel">
        <h3>Status</h3>
        <div class="info-item">
            <span>Algorithm:</span>
            <span id="current-algorithm">Bubble Sort</span>
        </div>
        <div class="info-item">
            <span>Array Size:</span>
            <span id="current-size">50</span>
        </div>
        <div class="info-item">
            <span>Speed:</span>
            <span id="current-speed">5</span>
        </div>
    </div>

    <div class="canvas-container" id="canvas-container">
        <!-- p5.js canvas will be inserted here -->
    </div>

    <!-- Load JavaScript files in correct order -->
    <script src="src/VisualArray.js"></script>
    <script src="src/SortingAlgorithm.js"></script>
    <script src="src/Controls.js"></script>
    <script src="src/sketch.js"></script>

    <script>
        // Update value displays when sliders change
        document.getElementById('size-slider').addEventListener('input', function() {
            document.getElementById('size-value').textContent = this.value;
            document.getElementById('current-size').textContent = this.value;
        });

        document.getElementById('speed-slider').addEventListener('input', function() {
            document.getElementById('speed-value').textContent = this.value;
            document.getElementById('current-speed').textContent = this.value;
        });

        document.getElementById('algorithm-select').addEventListener('change', function() {
            const algorithmNames = {
                'bubble': 'Bubble Sort',
                'selection': 'Selection Sort',
                'insertion': 'Insertion Sort',
                'merge': 'Merge Sort',
                'quick': 'Quick Sort'
            };
            document.getElementById('current-algorithm').textContent = algorithmNames[this.value];
        });

        // Status update functions
        function updateStatus(status) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = status;
            statusElement.className = 'status ' + status.toLowerCase().replace(' ', '-');
        }

        // Add loading animation to start button when sorting
        function setStartButtonState(isSorting) {
            const startBtn = document.getElementById('start-btn');
            if (isSorting) {
                startBtn.innerHTML = '<span class="loading"></span>Sorting...';
                startBtn.disabled = true;
                updateStatus('Sorting');
            } else {
                startBtn.innerHTML = 'Start Sorting';
                startBtn.disabled = false;
                updateStatus('Ready');
            }
        }

        // Make these functions globally available
        window.updateStatus = updateStatus;
        window.setStartButtonState = setStartButtonState;
    </script>
</body>
</html>
